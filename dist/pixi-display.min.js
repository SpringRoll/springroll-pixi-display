/*! SpringRoll Pixi Display 4.0.0 */
!function(){"use strict";!function(a){var b=include("PIXI.BaseTexture",!1);if(b){var c=b.prototype,d=c.destroy;c.destroy=function(){d.call(this);var a=PIXI.utils.TextureCache;for(var b in a){var c=a[b];c?c.baseTexture===this&&c.destroy():delete a[b]}}}}(),function(a){var b=include("PIXI.extras.BitmapText",!1);if(b){var c=b.prototype;c.setPivotToAlign=!1,c._orig_updateText=c.updateText,c.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.align){case"center":this.pivot.x=this.textWidth/2;break;case"right":this.pivot.x=this.textWidth;break;default:this.pivot.x=0}}}}(),function(a){var b=include("PIXI.Container",!1);if(b){var c=b.prototype;c.useBoundsForSize=!0,c._width=0,c._height=0,Object.getOwnPropertyDescriptor(c,"width").configurable&&(Object.defineProperty(c,"width",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.x*this.getLocalBounds().width:this.scale.x*this._width},set:function(a){if(this.useBoundsForSize){var b=this.getLocalBounds().width;this.scale.x=0!==b?a/b:1,this._width=a}else 0===this._width?this._width=a/this.scale.x:this.scale.x=a/this._width}}),Object.defineProperty(c,"height",{configurable:!0,get:function(){return this.useBoundsForSize?this.scale.y*this.getLocalBounds().height:this.scale.y*this._height},set:function(a){if(this.useBoundsForSize){var b=this.getLocalBounds().height;this.scale.y=0!==b?a/b:1,this._height=a}else 0===this._height?this._height=a/this.scale.y:this.scale.y=a/this._height}}))}}(),function(a){var b=include("PIXI.interaction.InteractionManager",!1);if(b){b.prototype.removeClickEvents=function(){this.interactionDOMElement&&(core.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled&&(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),window.removeEventListener("mouseup",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0))}}}(),function(a){var b=include("PIXI.Point",!1);if(b){var c=b.prototype;c.dotProd=function(a){return this.x*a.x+this.y*a.y},c.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},c.lengthSq=function(){return this.x*this.x+this.y*this.y},c.normalize=function(){var a=1/this.length();this.x*=a,this.y*=a},c.subtract=function(a){this.x-=a.x,this.y-=a.y},c.add=function(a){this.x+=a.x,this.y+=a.y},c.truncate=function(a){var b=this.length();if(b>a){var c=a/b;this.x*=c,this.y*=c}},c.scaleBy=function(a){this.x*=a,this.y*=a},c.distance=function(a){var b=this.x-a.x,c=this.y-a.y;return Math.sqrt(b*b+c*c)},c.distanceSq=function(a){var b=this.x-a.x,c=this.y-a.y;return b*b+c*c},b.localToGlobal=function(a,b,c,d){return d||(d=new PIXI.Point),d.x=b,d.y=c,a.toGlobal(d,d)},b.globalToLocal=function(a,b,c,d){return d||(d=new PIXI.Point),d.x=b,d.y=c,a.toLocal(d,null,d)},b.localToLocal=function(a,b,c,d,e){return e||(e=new PIXI.Point),e.x=c,e.y=d,b.toLocal(e,a,e)},c.toString=function(){return"("+this.x+", "+this.y+")"}}}(),function(a){var b=180/Math.PI,c=function(a,b,c,d,e){for(this.x=a||0,this.y=b||0,this.radius=c||0,this.startAngle=d||0;this.startAngle<0;)this.startAngle+=360;this.endAngle=e||0,this.endAngle<this.startAngle&&(this.endAngle+=360)},d=c.prototype;d.clone=function(){return new PIXI.Sector(this.x,this.y,this.radius,this.startAngle,this.endAngle)},d.contains=function(a,c){if(this.radius<=0)return!1;var d=this.x-a,e=this.y-c,f=this.radius*this.radius;if(d*=d,e*=e,d+e>f)return!1;for(var g=Math.atan2(c-this.y,a-this.x)*b;g<this.startAngle;)g+=360;return g>=this.startAngle&&g<=this.endAngle},d.constructor=c,namespace("PIXI").Sector=c}(),function(a){var b=include("PIXI.Text",!1);if(b){var c=b.prototype;c.setPivotToAlign=!1,c._orig_updateText=c.updateText,c.updateText=function(){if(this._orig_updateText(),this.setPivotToAlign)switch(this.style.align){case"center":this.pivot.x=this._width/2;break;case"right":this.pivot.x=this._width;break;default:this.pivot.x=0}}}}(),function(a){function b(a){var b=a.plugins.interaction;b&&(b.on("pointerdown",function(a){b.emit("stagedown",a)}),b.on("pointerup",function(a){b.emit("stageup",a)}),b.on("pointermove",function(a){b.emit("stagemove",a)}),b.on("pointerover",function(a){b.emit("stageover",a)}),b.on("pointerout",function(a){b.emit("stageout",a)}),Object.defineProperty(b,"handleCursorChange",{get:function(){return this.cursorStyles.default},set:function(a){this.cursorStyles.default=a,this.cursorStyles.pointer=a}}),Object.defineProperty(PIXI.interaction.InteractionData.prototype,"id",{get:function(){return this.identifier}}))}namespace("springroll.pixi").enableLegacy=b}(),function(){var a,b=include("springroll.ColorAlphaTask"),c=include("springroll.Task"),d=include("PIXI.Texture"),e=include("PIXI.BaseTexture"),f=include("PIXI.utils"),g=include("springroll.Application"),h=function(b,d){a||(a=include("springroll.pixi.PixiDisplay")),c.call(this,b,d||b.image),this.image=this.filter(b.image),this.color=this.filter(b.color),this.alpha=this.filter(b.alpha),this.uploadToGPU=!!b.uploadToGPU},i=c.extend(h);h.test=function(a){return"pixi"==a.type&&(!!a.image||!!a.alpha&&!!a.color)},i.start=function(a){this.loadImage({},a)},i.loadImage=function(c,h,i){this.image?c._image=this.image:(c._color=this.color,c._alpha=this.alpha),this.load(c,function(c){var j;j=c._image?c._image:b.mergeAlpha(c._color,c._alpha);var k=this.original.scale;k&&1!==k||(k=f.getResolutionOfUrl(this.image||this.color));var l=new d(new e(j,null,k));if(l.baseTexture.imageUrl=this.image,this.cache&&!i){this.id;d.addToCache(l,this.id),e.addToCache(l.baseTexture,this.id),l.__T_destroy=l.destroy,l.destroy=function(){this.__T_destroy(!0)}}if(this.uploadToGPU){var m=g.instance.displays;for(var n in m){var o=m[n];if(o instanceof a&&o.isWebGL){o.renderer.updateTexture(l);break}}}h(l,c)}.bind(this))},i.destroy=function(){c.prototype.destroy.call(this)},namespace("springroll.pixi").TextureTask=h}(),function(a){var b=include("PIXI.Spritesheet"),c=include("PIXI.Texture"),d=(include("PIXI.utils"),function(a,c){this.spritesheet=new b(a.baseTexture,c),this.frames={}}),e=extend(d);e.parse=function(a){this.spritesheet.parse(function(b){for(var d in b){var e=d,f=b[d],g=d.lastIndexOf(".");g>0&&(d=d.substring(0,g)),g=d.lastIndexOf("/"),g>=0&&(d=d.substring(g+1)),this.frames[d]=f,e!=d&&c.addToCache(f,d)}a()}.bind(this))},e.getFrame=function(a){return this.frames[a]||null},e.getFrames=function(b,c,d,e,f){e===a&&(e=4),e<0&&(e=0),f||(f=[]);var g,h,i=[],j=[];for(g=1;g<e;++g){var k="";h=1;for(var l=0;l<g;++l)k+="0",h*=10;i.unshift(k),j.push(h)}var m,n,o=j.length;for(g=c,n=d;g<=n;++g){var p=null;for(h=0;h<o;++h)if(g<j[h]){p=i[h]+g;break}p||(p=g.toString());var q=b.replace("#",p),r=this.frames[q];r&&(m=r),m&&f.push(m)}return f},e.destroy=function(){this.spritesheet.destroy(!0),this.spritesheet=null,this.frames=null},namespace("springroll.pixi").TextureAtlas=d}(),function(){var a=include("springroll.pixi.TextureTask"),b=(include("PIXI.Texture"),include("springroll.pixi.TextureAtlas")),c=(include("PIXI.utils"),function(b,c){a.call(this,b,c||b.atlas),this.atlas=this.filter(b.atlas)}),d=a.extend(c);c.test=function(b){return!!b.atlas&&a.test(b)},d.start=function(a){this.loadAtlas({},a)},d.loadAtlas=function(a,c,d){a._atlas=this.atlas,this.loadImage(a,function(a,e){var f=e._atlas,g=new b(a,f,this.cache&&!d);g.parse(function(){c(g,e)})}.bind(this),!0)},namespace("springroll.pixi").TextureAtlasTask=c}(),function(){var a=include("springroll.pixi.TextureTask"),b=(include("PIXI.Texture"),include("PIXI.Rectangle"),include("PIXI.extras.BitmapText",!1));include("PIXI.utils");if(b){var c=function(b){a.call(this,b,b.font),this.font=this.filter(b.font)},d=a.extend(c);c.test=function(b){return!!b.font&&a.test(b)},d.start=function(a){this.loadImage({_font:this.font},function(c,d){var e=d._font,f=b.registerFont(e,c);f.destroy=function(){delete b.fonts[f.font],f.chars=null,c.destroy()},a(f,d)}.bind(this),!0)},namespace("springroll.pixi").BitmapFontTask=c}}(),function(){(new(include("springroll.ApplicationPlugin"))).setup=function(){this.assetManager.register("springroll.pixi.TextureTask",60),this.assetManager.register("springroll.pixi.TextureAtlasTask",70),this.assetManager.register("springroll.pixi.BitmapFontTask",80),this.once("displayAdded",function(a){var b=this.options;!b.defaultAssetType&&a instanceof include("springroll.PixiDisplay")&&(b.defaultAssetType="pixi")})}}(),function(a){var b={};b.Circle=include("PIXI.Circle"),b.Ellipse=include("PIXI.Ellipse"),b.Rectangle=include("PIXI.Rectangle"),b.Sector=include("PIXI.Sector"),b.Point=include("PIXI.Point"),b.Polygon=include("PIXI.Polygon"),b.useRadians=!0,b.getLocalBounds=function(a){var b,c=a.width,d=a.height;return b=c&&d?new PIXI.Rectangle(-a.pivot.x,-a.pivot.y,c/a.scale.x,d/a.scale.y):new PIXI.Rectangle,b.right=b.x+b.width,b.bottom=b.y+b.height,b},b.getScale=function(b,c){return c!==a?b.scale[c]:b.scale},b.setPosition=function(b,c,d){return d!==a?b.position[d]=c:(c.x!==a&&(b.position.x=c.x),c.y!==a&&(b.position.y=c.y)),b},b.getPosition=function(b,c){return c!==a?b.position[c]:b.position},b.setScale=function(b,c,d){return d!==a?b.scale[d]=c:b.scale.x=b.scale.y=c,b},b.setPivot=function(b,c,d){return d!==a&&(b.pivot[d]=c),b.pivot=c,b},b.setHitArea=function(a,b){return a.hitArea=b,a},b.getBitmapSize=function(a){return{h:a.height/a.scale.y,w:a.width/a.scale.x}},b.removeChildren=function(a){a.removeChildren()},b.contains=function(a,b){for(;b;){if(b==a)return!0;b=b.parent}return!1},namespace("springroll.pixi").DisplayAdapter=b}(),function(a){var b=include("springroll.AbstractDisplay"),c=include("PIXI.Container"),d=include("PIXI.CanvasRenderer"),e=include("PIXI.WebGLRenderer"),f=include("PIXI.autoDetectRenderer"),g=include("springroll.pixi.enableLegacy"),h=function(a,h){b.call(this,a,h),h=h||{},this.keepMouseover=h.keepMouseover||!1,this._autoPreventDefault=!h.hasOwnProperty("autoPreventDefault")||h.autoPreventDefault,this.stage=new c,this.renderer=null;var i={view:this.canvas,transparent:!!h.transparent,antialias:!!h.antiAlias,preserveDrawingBuffer:!!h.preserveDrawingBuffer,clearBeforeRender:!!h.clearView,backgroundColor:h.backgroundColor||0,autoResize:!1,legacy:!!h.legacy},j=!!h.preMultAlpha;if(i.transparent&&!j&&(i.transparent="notMultiplied"),"webgl"!=h.forceContext){window.navigator.userAgent.indexOf("Trident/7.0")>0&&(h.forceContext="canvas2d")}"canvas2d"==h.forceContext?this.renderer=new d(this.width,this.height,i):"webgl"==h.forceContext?this.renderer=new e(this.width,this.height,i):this.renderer=f(this.width,this.height,i),this.isWebGL=this.renderer instanceof e,this.adapter=include("springroll.pixi.DisplayAdapter"),this.autoPreventDefault=this._autoPreventDefault,h.legacy&&g(this.renderer)},i=b.prototype,j=b.extend(h);Object.defineProperty(j,"enabled",{get:function(){return this._enabled},set:function(a){Object.getOwnPropertyDescriptor(i,"enabled").set.call(this,a);var b=this.renderer.plugins.interaction;b&&(a?b.setTargetElement(this.canvas):this.keepMouseover?b.removeClickEvents():b.removeEvents())}}),Object.defineProperty(j,"autoPreventDefault",{get:function(){return this._autoPreventDefault},set:function(a){this._autoPreventDefault=!!a;var b=this.renderer.plugins.interaction;b&&(b.autoPreventDefault=this._autoPreventDefault)}}),j.resize=function(a,b){i.resize.call(this,a,b),this.renderer.resize(a,b)},j.render=function(a,b){(b||!this.paused&&this._visible)&&this.renderer.render(this.stage)},j.destroy=function(){this.stage.destroy(),i.destroy.call(this),this.renderer.destroy(),this.renderer=null},namespace("springroll").PixiDisplay=h,namespace("springroll.pixi").PixiDisplay=h}(),function(){function a(a){e+=a,b.update(e)}var b=include("PIXI.ticker.shared",!1),c=include("springroll.ApplicationPlugin");if(b){var d=new c,e=0;b.autoStart=!1,b.stop(),d.setup=function(){this.on("update",a,300)}}}();}();